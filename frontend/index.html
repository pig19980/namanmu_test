<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id='modal' class="modal">

    </div>
    <div id='create-modal' class="create-modal">

    </div>
    <div class="card-modal">

    </div>
    <div class="register-modal">

    </div>
    <button class="btn-open-modal">로그인하기</button>
    <button class="btn-open-create">게시물 작성</button>

    <hr>

    <div class="card">
        <div class="post-card">
            <div class="post-text">
                <h5>올린사람 닉네임</h5>
                <h3>제목</h3>
                <h6>설명</h6>
            </div>
            <div class='date'>
                <h6>2024-10-07</h6>
                <h6>좋아요 수 13</h6>
            </div>
            <div class=img-box>
                <img src="img/0.jpg" width=100% height=100%>
            </div>
        </div>
        <div class="post-card">
            <div class="post-text">
                <h5>날 울린사람 닉네임</h5>
                <h3>제목</h3>
                <h6>가만두지 않겠어</h6>
            </div>
            <div class='date'>
                <h6>2024-10-07</h6>
                <h6>좋아요 수 13</h6>
            </div>
            <div class=img-box>
                <img src="img/0.jpg" width=100% height=100%>
            </div>
        </div>
        <div class="post-card">
            <div class="post-text">
                <h5>올린사람 닉네임</h5>
                <h3>제목</h3>
                <h6>설명</h6>
            </div>
            <div class='date'>
                <h6>2024-10-07</h6>
                <h6>좋아요 수 13</h6>
            </div>
            <div class=img-box>
                <img src="img/0.jpg" width=100% height=100%>
            </div>
        </div>
        <div class="post-card">
            <div class="post-text">
                <h5>올린사람 닉네임</h5>
                <h3>제목</h3>
                <h6>설명</h6>
            </div>
            <div class='date'>
                <h6>2024-10-07</h6>
                <h6>좋아요 수 13</h6>
            </div>
            <div class=img-box>
                <img src="img/0.jpg" width=100% height=100%>
            </div>
        </div>
    </div>
    <script src="loginmodal/loginmodal.js"></script>
    <script src="createmodal/createmodal.js"></script>
    <script src="cardmodal/cardmodal.js"></script>
    <script src="register/register.js"></script>

    <script>
        showArticles();

        function showArticles() {
            document.querySelector(".card").empty()
            fetch("/posts")
                .then((res) => res.json())
                .then((data) => {
                    for (let i = 0; i < data.length; i++) {
                        makeCard(data[i]["createdUsername"], data[i]["title"], data[i]["content"], data[i]["createdAt"], data[i]["likes"], data[i]["imageURL"]);
                    };
                    alert(data["message"])
                })
                .catch((error) => {
                    console.log("Error loading Cards :", error);
                })
        }

        function makeCard(createdUsername, title, content, createdAt, likes, imageURL) {
            let temp_html = `<div class="post-card">
            <div class="post-text">
                <h5>${createdUsername}</h5>
                <h3>${title}</h3>
                <h6>${content}</h6>
            </div>
            <div class='date'>
                <h6>${createdAt}</h6>
                <h6>${likes}</h6>
            </div>
            <div class=img-box>
                <img src="${imageURL}" width=100% height=100%>
            </div>
        </div>`
        //메인 페이지에 db에서 받아온 정보로 게시글 생성.
        document.querySelector(".card").innerHTML= temp_html;
        }
    </script>
</body>

</html>